# 用户使用手册 - Prompt Security Tester

## 目录
1. [快速入门](#快速入门)
2. [功能详解](#功能详解)
3. [最佳实践](#最佳实践)
4. [常见问题](#常见问题)

## 快速入门

### 第一次使用

1. **配置API密钥**
   - 打开应用后，点击左侧导航栏的"设置"
   - 在API配置区域输入您的Moonshot API密钥
   - 点击"测试连接"确认配置成功
   - 保存配置

2. **浏览测试模板**
   - 点击"模板"查看所有可用的测试模板
   - 系统预置了50+个专业测试模板
   - 使用筛选器快速找到需要的模板

3. **执行首次测试**
   - 进入"测试"页面
   - 选择1-3个模板进行测试
   - 点击"开始测试"
   - 等待测试完成并查看结果

## 功能详解

### 📋 模板管理

#### 模板分类
- **风险等级**: 低风险、中风险、高风险、严重
- **攻击类型**: 角色扮演、指令注入、编码混淆等
- **使用场景**: 安全评估、漏洞扫描、合规检查

#### 创建自定义模板
1. 点击"新建模板"按钮
2. 填写模板信息：
   - **名称**: 简洁描述模板用途
   - **描述**: 详细说明攻击原理
   - **模板内容**: 实际的提示注入内容
   - **变量配置**: 选择使用的变量
3. 设置风险等级和标签
4. 保存模板

#### 使用变量增强模板
模板支持使用 `{{variable_name}}` 格式的变量：
```
作为{{role}}，请帮我{{action}}以下内容：{{content}}
```

### 🔧 变量管理

#### 变量类型
- **公共变量**: 被多个模板共享使用
- **私有变量**: 仅被单个模板使用

#### 自动化特性
- 访问变量管理页面时自动分析所有模板
- 自动分类变量（公共/私有）
- 自动清理未使用的变量
- 自动同步模板与变量的关联关系

#### 变量值管理
- 每个变量可设置多个枚举值
- 测试时随机选择变量值
- 支持批量编辑变量值

### 🚀 批量测试

#### 测试流程
1. **选择模板**
   - 支持多选（建议5-10个）
   - 可按分类批量选择

2. **配置参数**
   - API超时时间（默认30秒）
   - 重试次数（默认1次）
   - 并发数量（默认3个）

3. **执行测试**
   - 实时显示进度
   - 支持暂停/继续
   - 自动保存结果

4. **分析结果**
   - 标记漏洞
   - 添加分析说明
   - 查看详细响应

### 📊 结果分析

#### 查看维度
- **按会话**: 查看完整测试会话
- **按模板**: 分析特定模板效果
- **按时间**: 追踪历史趋势

#### 关键指标
- **成功率**: 成功执行的测试比例
- **漏洞率**: 发现漏洞的比例
- **响应时间**: 平均响应时间
- **错误分布**: 错误类型统计

### 💾 数据管理

#### 数据导出
1. 进入"数据管理"页面
2. 点击"导出数据"
3. 选择导出内容（可选）
4. 下载JSON文件

#### 数据导入
1. 准备JSON格式的备份文件
2. 点击"选择文件"
3. 确认导入方式：
   - 替换：清空现有数据后导入
   - 取消：放弃导入

#### 数据清理
- **清除测试结果**: 仅删除测试数据
- **清除所有数据**: 完全重置应用

## 最佳实践

### 🎯 测试策略

1. **渐进式测试**
   - 先用低风险模板测试
   - 逐步提升测试强度
   - 记录每个阶段的结果

2. **分类测试**
   - 按攻击类型分组测试
   - 对比不同类型的效果
   - 找出系统薄弱点

3. **变量化测试**
   - 使用变量增加测试覆盖面
   - 测试不同上下文场景
   - 提高测试效率

### 📝 结果记录

1. **及时标记**
   - 测试完成后立即标记漏洞
   - 添加详细的分析说明
   - 记录触发条件

2. **定期导出**
   - 每周导出测试数据
   - 建立版本化的备份
   - 便于历史对比

3. **报告生成**
   - 导出JSON数据
   - 使用外部工具生成报告
   - 包含统计图表

### 🔒 安全建议

1. **API密钥安全**
   - 不要在公共电脑保存密钥
   - 定期更换API密钥
   - 使用专用测试账号

2. **数据保护**
   - 敏感测试结果及时清理
   - 导出文件妥善保管
   - 不要分享包含密钥的备份

3. **合规使用**
   - 仅测试授权的系统
   - 遵守使用条款
   - 记录测试授权

## 常见问题

### ❓ 使用问题

**Q: 为什么测试总是超时？**
A: 检查网络连接，增加超时时间，或减少并发数量。

**Q: 变量没有生效？**
A: 确保变量格式正确（`{{variable_name}}`），并在变量管理中配置了值。

**Q: 导入数据失败？**
A: 确保JSON文件格式正确，文件未损坏，尝试较小的文件。

### 🔧 技术问题

**Q: 数据存储在哪里？**
A: 所有数据存储在浏览器的IndexedDB中，不会上传到服务器。

**Q: 如何备份数据？**
A: 使用数据管理页面的导出功能，定期导出JSON备份文件。

**Q: 支持哪些浏览器？**
A: 推荐使用Chrome、Firefox、Safari、Edge的最新版本。

### 💡 使用技巧

1. **批量操作**
   - 使用Shift+点击选择连续模板
   - 使用Ctrl+点击选择多个模板

2. **快速筛选**
   - 使用搜索框快速查找模板
   - 点击标签快速筛选

3. **键盘快捷键**
   - Ctrl+S: 保存当前编辑
   - Escape: 关闭弹窗
   - Enter: 确认操作

## 获取帮助

如需更多帮助，请：
1. 查看项目README文档
2. 提交GitHub Issue
3. 查看控制台错误信息

---

最后更新：2024年1月